language: python

os: linux

cache:
  - pip

jobs:
  include:
    - stage: test-eg
      - python: "2.7"
        env: TARGET=test-target
        script: python test_calc.py
    - stage: test-eg2
      - python: "3.7"
        env: TARGET=test-target2
        script: python test_calc.py
    - stage: deploy-eg
      env: TARGET=deploy-target
      python: "3.7"
      script: python deploy.py

after_script:
  - echo $TARGET

notifications:
    email: false